<?xml version="1.0"?>
<mujoco model="xbot_arm_full">
  <!-- Compiler / meshdir -->
  <compiler angle="radian" meshdir="." />

  <!-- Assets: 使用你仓库中的实际 mesh 相对路径 -->
  <asset>
    <mesh name="base_link_mesh" file="../../meshes/xbot_arm/base_link.STL"/>
    <mesh name="arm_1_link_mesh" file="../../meshes/xbot_arm/arm_1_link.STL"/>
    <mesh name="arm_2_link_mesh" file="../../meshes/xbot_arm/arm_2_link.STL"/>
    <mesh name="arm_3_link_mesh" file="../../meshes/xbot_arm/arm_3_link.STL"/>
    <mesh name="arm_4_link_mesh" file="../../meshes/xbot_arm/arm_4_link.STL"/>
    <mesh name="arm_5_link_mesh" file="../../meshes/xbot_arm/arm_5_link.STL"/>
    <mesh name="arm_6_link_mesh" file="../../meshes/xbot_arm/arm_6_link.STL"/>
    <mesh name="gripper_1_link_mesh" file="../../meshes/xbot_arm/gripper_1_link.STL"/>
    <mesh name="gripper_2_link_mesh" file="../../meshes/xbot_arm/gripper_2_link.STL"/>
    <mesh name="gripper_centor_mesh" file="../../meshes/xbot_arm/gripper_centor_link.STL"/>
  </asset>

  <!-- Simulation options -->
  <option timestep="0.002" gravity="0 0 -9.81"/>

  <!-- Default geom/joint settings -->
  <default>
    <!-- URDF 中 gazebo mu1=mu2=0.9，映射到 MuJoCo friction 三元组 (slide, spin, roll) -->
    <geom friction="0.9 0.9 0.01" contype="1" conaffinity="1" solref="0.02 1" solimp="0.9 0.95 0.001"/>
    <joint damping="1.0"/>
  </default>

  <worldbody>
    <!-- base_link: 根 body -->
    <body name="base_link" pos="0 0 0">
      <inertial pos="-0.00594343164731706 -0.00101779633653512 0.070063016301284"
                mass="1.38676498234547"
                diaginertia="0.00442668602597922 0.00444008131004974 0.00774957715043441"/>
      <geom type="mesh" mesh="base_link_mesh" pos="0 0 0" euler="0 0 0"/>

      <!-- arm_1_link: origin xyz="0 0 0.14", rpy="3.1416 0 0" -> quat(0 1 0 0) -->
      <body name="arm_1_link" pos="0 0 0.14" quat="0 1 0 0">
        <inertial pos="-0.000117276290344319 0.0122228931530341 -0.0624701032538624"
                  mass="0.139955029249829"
                  diaginertia="0.000325457683704532 0.000236310540102376 0.000149250424678437"/>
        <geom type="mesh" mesh="arm_1_link_mesh" pos="0 0 0"/>

        <!-- hinge = revolute; axis 0 0 1; limits from URDF -->
        <joint name="arm_1_joint" type="hinge" pos="0 0 0" axis="0 0 1"
               range="-2.094 2.094" damping="1.0"/>

        <!-- arm_2_link: origin xyz="0 0 -0.095", rpy="-1.5708 0 0" -->
        <!-- rpy -> quat: (-1.5708,0,0) -> quat ~ (0.70710678, -0.70710678, 0, 0) -->
        <body name="arm_2_link" pos="0 0 -0.095" quat="0.70710678 -0.70710678 0 0">
          <inertial pos="-0.0174680236422027 0.0906428723777263 -3.29773055841057E-07"
                    mass="0.169587438537964"
                    diaginertia="0.000621052722745594 0.000313103181930873 0.000405564215148294"/>
          <geom type="mesh" mesh="arm_2_link_mesh" pos="0 0 0"/>
          <joint name="arm_2_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                 range="-2.094 1.57079632679" damping="1.0"/>

          <!-- arm_3_link: origin xyz="-0.018 0.145 0", rpy="1.5708 0 0" -->
          <!-- quat ~ (0.70710678, 0.70710678, 0, 0) -->
          <body name="arm_3_link" pos="-0.018 0.145 0" quat="0.70710678 0.70710678 0 0">
            <inertial pos="-0.000485421157864062 6.83606345788855E-05 -0.0518192203685102"
                      mass="0.113439004135591"
                      diaginertia="0.000235493816702144 0.00016178376053715 0.000115808035506604"/>
            <geom type="mesh" mesh="arm_3_link_mesh" pos="0 0 0"/>
            <joint name="arm_3_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                   range="-2.793 2.793" damping="1.0"/>

            <!-- arm_4_link: origin xyz="0 0 -0.105", rpy="-1.5708 0 0" -->
            <!-- quat ~ (0.70710678, -0.70710678, 0, 0) -->
            <body name="arm_4_link" pos="0 0 -0.105" quat="0.70710678 -0.70710678 0 0">
              <inertial pos="-0.000523676254705792 0.0548426547509552 -2.32870051976362E-06"
                        mass="0.0923387760232059"
                        diaginertia="0.000210731589973129 0.000113562778686391 0.000125255151693492"/>
              <geom type="mesh" mesh="arm_4_link_mesh" pos="0 0 0"/>
              <joint name="arm_4_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                     range="-1.92 1.92" damping="1.0"/>

              <!-- arm_5_link: origin xyz="0 0.105 0", rpy="1.5708 0 0" -->
              <!-- quat ~ (0.70710678, 0.70710678, 0, 0) -->
              <body name="arm_5_link" pos="0 0.105 0" quat="0.70710678 0.70710678 0 0">
                <inertial pos="-0.000318440471593399 -4.33257243015121E-09 -0.0421503668391696"
                          mass="0.0467464068633803"
                          diaginertia="5.04548630748624E-05 3.77221825095438E-05 2.16144252369209E-05"/>
                <geom type="mesh" mesh="arm_5_link_mesh" pos="0 0 0"/>
                <joint name="arm_5_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                       range="-2.793 2.793" damping="1.0"/>

                <!-- arm_6_link: origin xyz="0 -0.0002 -0.075", rpy="-1.5708 0 0" -->
                <!-- quat ~ (0.70710678, -0.70710678, 0, 0) -->
                <body name="arm_6_link" pos="0 -0.0002 -0.075" quat="0.70710678 -0.70710678 0 0">
                  <inertial pos="0.00023077781229322 0.0477776544969339 -0.000274578550932736"
                            mass="0.0663534128705839"
                            diaginertia="4.46094691893757E-05 3.14288652751225E-05 5.02053835003699E-05"/>
                  <geom type="mesh" mesh="arm_6_link_mesh" pos="0 0 0"/>
                  <joint name="arm_6_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                         range="-1.57 1.57" damping="1.0"/>

                  <!-- gripper_1_link: origin rpy="1.5708 0 1.5708", xyz="-0.0001 0.06175 0.0115" -->
                  <!-- quat computed ~ (0.5, 0.5, 0.50000184, 0.5) -->
                  <body name="gripper_1_link" pos="-0.0001 0.06175 0.0115" quat="0.49999816 0.5 0.50000184 0.5">
                    <inertial pos="0.0428524050252714 0.0102173668833365 1.53174098056555E-05"
                              mass="0.0229460702572688"
                              diaginertia="1.29555143093886E-05 2.6397024313168E-05 1.7220072843041E-05"/>
                    <geom type="mesh" mesh="gripper_1_link_mesh" pos="0 0 0"/>
                    <joint name="gripper_1_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                           range="0 0.698" damping="1.0"/>
                  </body>

                  <!-- gripper_2_link: origin rpy="-1.5708 0 1.5708", xyz="-0.0001 0.06175 -0.012" -->
                  <!-- quat computed ~ (0.49999816, -0.5, -0.50000184, 0.5) -->
                  <body name="gripper_2_link" pos="-0.0001 0.06175 -0.012" quat="0.49999816 -0.5 -0.50000184 0.5">
                    <inertial pos="0.0428304976382079 0.0102055784464402 9.00813000661443E-07"
                              mass="0.0229585233092397"
                              diaginertia="1.30784892266813E-05 2.67601282938736E-05 1.74955869845825E-05"/>
                    <geom type="mesh" mesh="gripper_2_link_mesh" pos="0 0 0"/>
                    <joint name="gripper_2_joint" type="hinge" pos="0 0 0" axis="0 0 1"
                           range="0 0.698" damping="1.0"/>
                  </body>

                  <!-- gripper center fixed link -->
                  <!-- origin rpy="-1.5708 0 1.5708", xyz="-0.000 0.125 0" -->
                  <body name="gripper_centor_link" pos="-0.000 0.125 0" quat="0.49999816 -0.5 -0.50000184 0.5">
                    <geom type="mesh" mesh="gripper_centor_mesh" pos="0 0 0" contype="0" conaffinity="0"/>
                  </body>

                </body> <!-- end arm_6_link -->
              </body> <!-- end arm_5_link -->
            </body> <!-- end arm_4_link -->
          </body> <!-- end arm_3_link -->
        </body> <!-- end arm_2_link -->
      </body> <!-- end arm_1_link -->
    </body> <!-- end base_link -->
  </worldbody>

  <!-- Actuators: 将 URDF 的 PositionJointInterface -> MuJoCo position actuators -->
  <actuator>
    <!-- arm actuators -->
    <position joint="arm_1_joint" kp="100" gear="1"/>
    <position joint="arm_2_joint" kp="100" gear="1"/>
    <position joint="arm_3_joint" kp="100" gear="1"/>
    <position joint="arm_4_joint" kp="100" gear="1"/>
    <position joint="arm_5_joint" kp="100" gear="1"/>
    <position joint="arm_6_joint" kp="100" gear="1"/>

    <!-- grippers: 推荐仅驱动 gripper_1，并在控制端同步 gripper_2 (mimic multiplier=1) -->
    <position joint="gripper_1_joint" kp="200" gear="1"/>
    <!-- 如果你想在 MJCF 内部同时驱动 gripper_2，也可启用下面 actuator -->
    <position joint="gripper_2_joint" kp="200" gear="1"/>
  </actuator>

  <!-- 说明 / 建议：
       1) 如果希望在 MJCF 层实现精确 mimic（gripper_2 跟随 gripper_1），可以加 equality
          <equality>
            <joint joint1="gripper_2_joint" joint2="gripper_1_joint" />
          </equality>
          （不同 MuJoCo 版本行为略有差异，请小心使用）
       3) 我把所有 rpy -> quat 用高精度值写进了相应 body 的 quat 属性，保证和 URDF 的姿态一致。
  -->
</mujoco>
